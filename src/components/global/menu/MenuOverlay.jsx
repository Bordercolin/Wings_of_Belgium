import React, { useContext, useState } from "react";
import style from "./menuOverlay.module.css";
import ProgressBar from "../progress/ProgressBar";
import MenuFooter from "./MenuFooter";
import { NavLink } from "react-router-dom";
import { UserContext } from "../../../context/UserContext.jsx";
import "./changeIcon.css";

export default function MenuOverlay({ onClose }) {
  const { user, logout } = useContext(UserContext);
  const [showLogout, setShowLogout] = useState(false);

  return (
    <div className={style.overlay}>
      <div className={style.overlay__innerContainer}>
        <button className={style.closeBtn} onClick={onClose}>
          Close
        </button>
        <img
          src={user?.activePlayerAvatar.avatar.image.url}
          alt="Avatar"
          className={style.avatar}
        />
        <div className={style.userRanking}>
          <img
            className={style.rankIcon}
            src={user?.rankPlayer.rank.image.url}
            alt={user?.rankPlayer.rank.name}
          />
          <p>{user?.rankPlayer.rank.name}</p>
        </div>
        <ProgressBar />
        <div className={style.iconGroup}>
          <NavLink className={style.iconLink} to="/">
            <svg
              className={style.iconStyleHome}
              xmlns="http://www.w3.org/2000/svg"
              id="Layer_1"
              data-name="Layer 1"
              viewBox="0 0 595.28 595.28"
            >
              <defs />
              <path
                d="M29.8 203.64h169.22l64.3 61.72c3.47 3.47 7.98 12.29 9.21 17.04 0 .03.02.07.03.1.3 1.17.59 2.38.88 3.62 3.65 15.35 8.64 36.37 56.83 59.38 9.42 4.5 39.26 25.31 35.07 76.09h-32.92c.18-12.6-3.41-39.37-35.52-49.05-27-8.14-28.98-18.57-31.07-29.61-.83-4.39-1.69-8.92-4.12-13.19-1.89-3.33-6.14-7.43-11.06-12.16-4.87-4.69-10.38-10-12.71-13.97-4-6.83-4.02-22.31-3.69-27.7l-6.99-.44c-.05.88-1.26 21.61 4.64 31.68 2.82 4.81 8.45 10.23 13.89 15.47 4.15 4 8.44 8.13 9.84 10.58 1.85 3.25 2.56 7.03 3.32 11.03 2.75 14.53 7.15 26.33 35.93 35.01 28.18 8.5 30.93 31.68 30.62 42.35h-45.09c-2.64-6.31-10.03-19.23-28.03-26.64-16.99-7-17.34-18.73-17.75-32.3l-.04-1.2c.19-.93.32-1.46.32-1.46h-.36l-.09-2.72h-51.03l-48.38-48.38h45.8l15.79 15.79 4.94-4.95-17.83-17.84h-55.32L85.2 259.05h107.06l17.73 17.72 4.95-4.95-19.78-19.77H78.2l-48.41-48.41Z"
                class="cls-1"
              />
              <path
                d="m517.07 252.04 48.41-48.41H396.26l-34.33 34.34c-1.1 1.1-1.72 2.6-1.72 4.16v7.64c0 6.62-4.97 12.19-11.57 12.95-10.65 1.23-23.4 5.52-23.65 18.96-.1 5.21 1.49 9.31 4.85 12.54 9.32 8.94 28.74 7.87 28.94 7.86l.43 6.99c-.92.06-22.65 1.28-34.2-9.78-4.8-4.6-7.16-10.56-7.02-17.74.27-14.43 10.87-23.59 29.84-25.78 3.07-.36 5.38-2.94 5.38-6v-22.7c0-3.11-2.43-5.75-5.53-6.01l-23.13-1.93c-4.3-.36-7.9-3.57-8.73-7.82l-.19-2.09a6.32 6.32 0 0 0-6.2-5.1l-50.26-.06c-8.89 0-10.81 5.32-10.8 8 0 10.14 1.55 19.05 3.44 25.75a28.22 28.22 0 0 0 5.42 10.36l6.83 8.24c.19.23.39.44.6.64 3.86 3.66 7.35 7.45 10.14 12.31.18.31.35.62.52.94 1.63 3 2.99 6.42 4.03 10.44.31 1.22.61 2.47.92 3.75 3.5 14.76 7.86 33.11 53.03 54.68 10.39 4.97 16.62 11.27 22.4 18.09h56.15l48.38-48.38h-45.8l-15.79 15.79-4.95-4.95 17.84-17.84h55.7l42.84-42.84H403l-17.72 17.72-4.95-4.95 19.77-19.77h116.97Zm-211.54-21.45h-21.94v-7h21.94v7Z"
                class="cls-1"
              />
              <path
                fill="#fff"
                stroke-width="0"
                d="m277.69 276.79-.14.14c-.17-.32-.34-.63-.52-.94l.66.8Z"
              />
              <path
                d="m318.48 182.44-3.89 11.42h-61.94l-3.94-11.51c2.8 1.18 6.32 2.1 10.5 2.1 9.35 0 20.04-7.4 24.42-10.77 4.35 3.29 15.23 10.77 24.39 10.77 4.18 0 7.69-.88 10.47-2.02Z"
                class="cls-1"
              />
            </svg>
            <p>Home</p>
          </NavLink>
          <NavLink className={style.iconLink} to="/achievements">
            <svg
              className={style.iconStyle}
              xmlns="http://www.w3.org/2000/svg"
              data-name="Layer 2"
              viewBox="0 0 121.77 156.14"
            >
              <path
                d="M116.66 0H5.11C2.28 0 0 2.29 0 5.11V120.9c0 1.88 1.02 3.6 2.68 4.5l55.77 30.13c1.52.81 3.35.81 4.86 0l55.78-30.13c1.65-.9 2.68-2.62 2.68-4.5V5.11c0-2.82-2.29-5.11-5.11-5.11ZM7.99 12.27C7.99 9.91 9.91 8 12.26 8h97.24c2.35 0 4.27 1.91 4.27 4.27v54.86l-4-1.64V13.63c0-.9-.73-1.63-1.63-1.63H13.62c-.9 0-1.63.73-1.63 1.63v51.86l-4 1.64V12.27ZM80.35 45.9l-1.12 3.3c-.19.53-.69.89-1.25.89H43.8c-.57 0-1.07-.36-1.25-.89l-1.13-3.31c-.34-.99.54-1.95 1.55-1.71 1.11.26 2.35.43 3.71.43 4.95 0 10.56-3.57 13.45-5.69a1.29 1.29 0 0 1 1.54 0c2.89 2.09 8.58 5.69 13.42 5.69 1.37 0 2.61-.16 3.72-.42 1.01-.23 1.87.74 1.54 1.71Zm33.42 70.09c0 1.57-.86 3.01-2.24 3.76l-48.62 26.26a4.305 4.305 0 0 1-4.06 0l-48.62-26.26a4.279 4.279 0 0 1-2.24-3.76V80.91l4 1.68v33.4c0 .1.06.19.14.24l48.62 26.26c.08.04.18.04.26 0l48.62-26.26a.27.27 0 0 0 .14-.24v-33.4l4-1.67v35.07Zm2.26-41.44L101.1 80.8c-.14.06-.31.06-.45.01L72.86 69.42a.585.585 0 0 0-.45 0l-5.96 2.5a.58.58 0 0 0-.31.77l.24.59c.13.3.48.45.78.32l5.26-2.2c.14-.06.3-.06.45 0l24.3 9.95c.49.2.49.89 0 1.1L84.14 87.9c-.15.07-.31.07-.45.01l-13-5.33a.585.585 0 0 0-.45 0l-3.78 1.59.69 1.69 3.1-1.3c.14-.06.3-.06.45 0l9.51 3.9c.49.2.49.88 0 1.09L65.29 95.8c-.14.06-.31.06-.45 0l-3.96-1.62-3.95 1.62c-.15.06-.31.06-.45 0l-14.93-6.25c-.48-.21-.48-.89 0-1.09l9.51-3.9c.14-.06.31-.06.45 0l3.1 1.3.69-1.69-3.78-1.59a.585.585 0 0 0-.45 0l-13 5.33c-.14.06-.31.06-.45-.01l-13.04-5.45c-.48-.21-.48-.9.01-1.1l24.3-9.95c.14-.06.31-.06.45 0l5.26 2.2c.3.13.65-.02.77-.32l.25-.59c.13-.3-.01-.65-.32-.77l-5.95-2.5a.585.585 0 0 0-.45 0L21.11 80.81c-.14.05-.31.05-.45-.01L5.73 74.55c-.49-.2-.48-.89 0-1.09l39.3-16.11a.61.61 0 0 1 .46.01l11.46 4.8c.37.15.67.45.82.83l3.1 7.57 3.11-7.57c.15-.38.45-.68.82-.83l11.46-4.8c.14-.06.31-.07.45-.01l39.31 16.11c.48.2.49.89 0 1.09Z"
                data-name="Layer 1"
              />
            </svg>
            <p>Achievements</p>
          </NavLink>
          <NavLink className={style.iconLink} to="/news">
            <svg
              className={style.iconStyle}
              xmlns="http://www.w3.org/2000/svg"
              id="Layer_2"
              data-name="Layer 2"
              viewBox="0 0 174.16 171.38"
            >
              <defs>
                <clipPath id="clippath">
                  <circle
                    cx="82.5"
                    cy="86.98"
                    r="80"
                    fill="none"
                    stroke-width="0"
                  />
                </clipPath>
              </defs>
              <g id="Layer_1-2" clip-path="url(#clippath)" data-name="Layer 1">
                <path
                  d="M44.76 28.11 29.47 45.86a.57.57 0 0 0-.11.22l-1.46 7.3c-.09.45.46.76.79.44l7.57-7.17s.04-.04.06-.05L56.2 33.39c.31-.21.27-.69-.08-.83l-10.83-4.58a.462.462 0 0 0-.54.13ZM81.82 38.14l-12.39 3.14c-.16.04-.29.15-.36.3l-6.18 13.08a.5.5 0 0 0-.03.38l1.32 4.84c.09.32.44.49.74.36l2.95-1.25c.21-.09.44-.04.6.12l3.45 3.43c.35.35.94.09.94-.4l-.16-13.63c0-.63.88-.77 1.07-.17l1.69 5.28c.08.25.33.41.59.38l6.05-.74c.46-.06.78.45.53.84l-6.28 9.91s-.07.09-.12.13l-3.84 3.15a.55.55 0 0 1-.85-.2l-2.27-5.01a.546.546 0 0 0-1.02.06l-1.4 4.46c-.02.06-.05.12-.09.17l-7.24 9.59a.62.62 0 0 1-.22.17l-5.91 2.6c-.39.17-.44.71-.09.95l5.46 3.82c.23.16.3.47.17.72l-1.8 3.24c-.11.2-.33.31-.55.28l-8.27-1.07a.552.552 0 0 0-.62.61l1.24 11.11c.03.28.27.49.55.49h9.28c.21 0 .4-.12.49-.31l3.94-7.98s.05-.08.08-.12l3.5-3.94s.1-.09.15-.12l4.12-2.19c.18-.09.39-.08.56.03l9.62 6.41c.16.11.25.29.24.48l-.12 2.5c-.03.54.66.79.98.36l1.28-1.67c.06-.08.1-.17.11-.26l.33-2.39a.52.52 0 0 1 .29-.41l.94-.48c.41-.21.39-.81-.04-.99l-7.12-3.06a.565.565 0 0 1-.28-.27l-1.94-4.16c-.24-.52.38-1.02.83-.67l16.84 13.09c.35.27.85.04.88-.39l.26-3.47c0-.12-.02-.23-.08-.33l-2.11-3.42c-.31-.51.29-1.08.78-.74l6 4.11c.18.12.41.13.6.02l9.44-5.74c.27-.16.62-.07.77.21l3.7 6.81c.14.26.05.58-.2.73l-17.03 10.13s-.1.05-.16.06l-13.63 3.05a.54.54 0 0 1-.5-.14l-6.94-6.69a.544.544 0 0 0-.57-.12l-23.83 8.75c-.18.07-.32.23-.35.42l-5.48 31.07c-.04.22.06.45.25.56l18.96 11.63c.11.07.24.09.36.08l25.21-3.48c.22-.03.45.08.56.28l13.59 24.59c.13.24.42.35.68.25l33.29-12.75c.27-.1.42-.41.33-.68l-4.76-14.5a.555.555 0 0 1 0-.36l11.35-31.61c.17-.46-.31-.89-.76-.68l-10.93 5.27c-.19.09-.41.07-.57-.06l-20.64-15.58c-.46-.34-.15-1.07.42-.98l11.66 1.85c.11.02.21.07.3.15l10.96 10.58c.27.26.72.18.88-.16l9.56-20.5c.08-.18.06-.38-.05-.54l-4.08-5.91a.547.547 0 0 0-.9 0l-3.7 5.25c-.19.27-.57.31-.82.09l-5.23-4.77a.551.551 0 0 1 .09-.88l18.79-11.05a.56.56 0 0 1 .66.08l22.65 21.81c.36.35.97.06.93-.44l-4.97-59.21a.532.532 0 0 0-.2-.38L126.26.13c-.13-.11-.3-.15-.46-.11L96.44 5.94c-.11.02-.2.07-.28.15l-6.96 6.96c-.16.16-.2.39-.12.59l4.74 11.87c.06.15.05.32-.02.46l-7.22 13.84c-.05.1-.14.18-.24.24l-3.05 1.55c-.37.19-.8-.08-.8-.49v-2.43c0-.36-.34-.62-.68-.53Z"
                  class="cls-3"
                />
                <path
                  d="m56.65 59.96-4.15 3.18 2.85 5.98-2.85 6.94 7.47-2.43 1.57-3.89-3.18-.08-2.18-4.61.47-5.09z"
                  class="cls-3"
                />
                <path
                  d="m51.18 67.05-.78 1.47-2.41.55v4.3l1.59.96 2.92-2.15 1.12-4.67-2.44-.46zM44 48.83l-.16 3.31s0 .06-.02.09l-.5 1.67c-.07.25.12.49.38.47l2.82-.23c.07 0 .15-.03.2-.08l3.23-2.66c.1-.08.15-.21.13-.33l-.23-1.67a.372.372 0 0 0-.34-.32l-2.71-.15-.64.34-.58-1.23a.365.365 0 0 0-.55-.14l-.89.66c-.09.07-.14.17-.15.28ZM24.28 43.41l-3.72 9.34s-.02.04-.02.07l-3.65 14.82c-.13.55-.92.52-1.01-.04l-1.27-7.76a.518.518 0 0 0-.9-.26l-1.26 1.43c-.11.12-.15.29-.12.45l1.18 5.69c.08.38-.28.71-.65.6l-1.93-.57a.516.516 0 0 1-.35-.64l.51-1.81c.14-.49-.44-.86-.83-.54l-6.67 5.57a.516.516 0 0 1-.84-.49l3.59-20.15s.03-.1.05-.14l4.51-8.88a.61.61 0 0 1 .12-.16L35.47 18.7c.17-.15.42-.17.61-.05l6.58 4.08c.27.16.33.52.13.77l-4.84 5.94s-.05.07-.07.11l-3.69 8.16a.52.52 0 0 1-.93.03l-2.55-4.81a.515.515 0 0 0-.78-.16l-10.05 7.96a.49.49 0 0 0-.17.25l-1.67 5.43c-.15.5.45.89.84.54l4.56-4.13c.41-.37 1.03.07.83.57Z"
                  class="cls-3"
                />
                <circle
                  cx="82.5"
                  cy="86.98"
                  r="80"
                  fill="none"
                  stroke="#1d1d1b"
                  stroke-miterlimit="10"
                  stroke-width="5"
                />
              </g>
            </svg>{" "}
            <p>News</p>
          </NavLink>
          <NavLink className={style.iconLink} to="/settings">
            <svg
              className={style.iconStyle}
              xmlns="http://www.w3.org/2000/svg"
              data-name="Layer 2"
              viewBox="0 0 95.91 94.51"
            >
              <path
                d="m95.88 47.97-3.21-18.21a1.915 1.915 0 0 0-2.22-1.55l-9.03 1.59c-1.77.31-2.96-1.75-1.81-3.13l5.9-7.03c.68-.81.57-2.02-.24-2.7L71.1 5.06c-.81-.68-2.02-.57-2.7.24l-5.9 7.02c-1.16 1.38-3.4.56-3.4-1.23V1.92C59.1.86 58.24 0 57.18 0H38.69c-1.06 0-1.92.86-1.92 1.92v9.18c0 1.79-2.24 2.61-3.4 1.23l-5.9-7.02c-.68-.81-1.89-.92-2.7-.24L10.61 16.95c-.81.68-.92 1.89-.24 2.7l5.89 7.03c1.16 1.38-.04 3.44-1.81 3.13l-9.03-1.59a1.91 1.91 0 0 0-2.22 1.55L.03 47.97c-.19 1.04.51 2.03 1.55 2.22l9.03 1.59c1.77.31 2.18 2.66.63 3.56L3.3 59.93c-.92.53-1.23 1.7-.7 2.62l9.24 16.02c.53.92 1.7 1.23 2.62.7l7.95-4.59c1.55-.9 3.38.63 2.77 2.32l-3.14 8.62c-.36 1 .15 2.1 1.14 2.46l17.38 6.33c1 .36 2.1-.15 2.46-1.15l3.14-8.62c.62-1.69 3-1.69 3.62 0l3.13 8.62c.36 1 1.46 1.51 2.46 1.15l17.38-6.33c1-.36 1.51-1.46 1.15-2.46L70.76 77c-.62-1.69 1.21-3.22 2.77-2.32l7.94 4.59c.92.53 2.09.22 2.62-.7l9.25-16.02c.53-.92.22-2.08-.7-2.62l-7.94-4.59c-1.56-.9-1.14-3.25.62-3.56l9.04-1.59a1.915 1.915 0 0 0 1.55-2.22ZM47.95 62.56c-8.45 0-15.31-6.85-15.31-15.31s6.85-15.31 15.31-15.31 15.31 6.85 15.31 15.31-6.86 15.31-15.31 15.31Z"
                data-name="Layer 1"
              />
            </svg>
            <p>Settings</p>
          </NavLink>
        </div>
        <div className={style.logoutBtn}>
          <button onClick={() => setShowLogout(!showLogout)}>Logout</button>
        </div>
        {showLogout && (
          <div className={style.logoutModal}>
            <p>Are you sure you want to logout?</p>
            <div className={style.logoutBtns}>
              <button onClick={() => setShowLogout(false)}>Cancel</button>
              <button onClick={() => logout()}>Logout</button>
            </div>
          </div>
        )}
      </div>
      <MenuFooter />
    </div>
  );
}
